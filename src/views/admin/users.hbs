<div class="container mt-5 px-3 px-md-4 animate__animated animate__fadeIn">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold"><i class="bi bi-people-fill me-2"></i>Usuarios Registrados</h2>
    <div class="d-flex flex-wrap gap-2 justify-content-end">
      <a href="/dashboard" class="btn btn-outline-secondary me-2">
        <i class="bi bi-arrow-left me-1"></i>Volver al Panel
      </a>
      <a href="/registerUser" class="btn btn-primary">
        <i class="bi bi-person-plus me-1"></i>Crear Usuario
      </a>
    </div>
  </div>

  {{#if users.length}}
    <div class="table-responsive shadow rounded-4 border border-2 p-4 bg-white">
      <form class="mb-4 d-flex flex-wrap gap-2 align-items-center" method="GET">
  <label class="me-2 fw-semibold" for="role">Filtrar por rol:</label>
  <select id="role" name="role" class="form-select w-auto me-2" onchange="this.form.submit()">
    <option value="" {{#unless selectedRole}}selected{{/unless}}>Todos</option>
    <option value="admin" {{#if (eq selectedRole "admin")}}selected{{/if}}>Administrador</option>
    <option value="supervisor" {{#if (eq selectedRole "supervisor")}}selected{{/if}}>Supervisor</option>
    <option value="employee" {{#if (eq selectedRole "employee")}}selected{{/if}}>Empleado</option>
  </select>
</form>
      <table class="table table-striped table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {{#each users}}
            <tr>
              <td>{{this.name}}</td>
              <td>{{this.email}}</td>
              <td><span class="badge bg-secondary text-uppercase">{{this.role}}</span></td>
              <td>
                <a href="/user/{{this._id}}" class="btn btn-sm btn-outline-primary">
                  <i class="bi bi-eye-fill me-1"></i>Ver Perfil
                </a>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  {{else}}
    <div class="alert alert-warning mt-4 text-center" role="alert">
      No se encontraron usuarios registrados.
    </div>
  {{/if}}
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>